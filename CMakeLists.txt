cmake_minimum_required(VERSION 2.8.12)
PROJECT(openvdb-points-unity)
include(${CMAKE_BINARY_DIR}/conanbuildinfo.cmake)
conan_basic_setup()
include(${CMAKE_BINARY_DIR}/conanbuildinfo.cmake)
conan_basic_setup()

if(APPLE)
    set(MAC_OSX_BUNDLE_BUNDLE_NAME openvdb-points-unity-osx)
    add_library(openvdb-points-unity MODULE ${PROJECT_SOURCE_DIR}/src/openvdb-points-unity.cpp)
    set_target_properties(openvdb-points-unity PROPERTIES BUNDLE TRUE)
    target_link_libraries(openvdb-points-unity openvdb tbb Half)
endif()
if(UNIX AND NOT APPLE)
    add_library(openvdb-points-unity SHARED ${PROJECT_SOURCE_DIR}/src/openvdb-points-unity.cpp)
    target_link_libraries(openvdb-points-unity openvdb tbb Half)
endif()
if(UNIX)
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -std=c++11 -lstdc++ -lm -DOPENVDB_3_ABI_COMPATIBLE")
endif()
